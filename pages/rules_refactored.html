<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rules - Secret Hitler - Pass & Play</title>
    <meta name="description" content="Learn how to play Secret Hitler - the ultimate social deduction game">
    <link rel="stylesheet" href="../styles/app.css">
    <link rel="manifest" href="../manifest.json">
    <script src="../components/loader.js"></script>
</head>
<body>
    <div class="page-wrapper">
        <!-- Header will be injected here -->
        <div id="app-header"></div>
        
        <!-- Main Content -->
        <main>
            <div class="rules-page">
                <!-- Rules Header Section -->
                <div data-component="section-header" 
                     data-component-data='{"icon":"üìñ","title":"How to Play Secret Hitler","subtitle":"A social deduction game of hidden identities and political intrigue"}'></div>
                
                <div class="rules-decoration">
                    <div class="decoration-line"></div>
                    <div class="decoration-dot"></div>
                    <div class="decoration-line"></div>
                </div>

                <div class="rules-navigation">
                    <button class="rule-nav-btn active" data-section="overview">
                        <span class="nav-icon">üéØ</span>
                        <span class="nav-text">Overview</span>
                    </button>
                    <button class="rule-nav-btn" data-section="setup">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        <span class="nav-text">Setup</span>
                    </button>
                    <button class="rule-nav-btn" data-section="gameplay">
                        <span class="nav-icon">üîÑ</span>
                        <span class="nav-text">Gameplay</span>
                    </button>
                    <button class="rule-nav-btn" data-section="roles">
                        <span class="nav-icon">üé≠</span>
                        <span class="nav-text">Roles</span>
                    </button>
                    <button class="rule-nav-btn" data-section="powers">
                        <span class="nav-icon">‚ö°</span>
                        <span class="nav-text">Special Powers</span>
                    </button>
                    <button class="rule-nav-btn" data-section="winning">
                        <span class="nav-icon">üèÜ</span>
                        <span class="nav-text">Winning</span>
                    </button>
                </div>

                <div class="rules-content">
                    <!-- Overview Section -->
                    <section id="overview-section" class="rule-section active">
                        <div data-component="section-header" 
                             data-component-data='{"icon":"üéØ","title":"Game Overview"}'></div>
                        
                        <div class="overview-grid">
                            <!-- Using data-component for game info cards -->
                            <div data-component="game-info-card" 
                                 data-component-data='{"icon":"üë•","title":"Players","description":"5-10 players"}'></div>
                            <div data-component="game-info-card" 
                                 data-component-data='{"icon":"‚è±Ô∏è","title":"Duration","description":"30-45 minutes"}'></div>
                            <div data-component="game-info-card" 
                                 data-component-data='{"icon":"üé≠","title":"Type","description":"Social Deduction"}'></div>
                            <div data-component="game-info-card" 
                                 data-component-data='{"icon":"üèõÔ∏è","title":"Theme","description":"Political intrigue"}'></div>
                        </div>

                        <div class="game-objective">
                            <div class="objective-header">
                                <div class="objective-icon">üéØ</div>
                                <h4>The Objective</h4>
                            </div>
                            <div class="objective-cards">
                                <div class="objective-card liberal">
                                    <div class="objective-header">
                                        <span class="team-icon">üü¶</span>
                                        <span class="team-name">Liberal Team</span>
                                    </div>
                                    <p>Pass 5 Liberal policies OR identify and execute Hitler</p>
                                </div>
                                <div class="objective-card fascist">
                                    <div class="objective-header">
                                        <span class="team-icon">üü•</span>
                                        <span class="team-name">Fascist Team</span>
                                    </div>
                                    <p>Pass 6 Fascist policies OR have Hitler elected Chancellor after 3 Fascist policies</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Other sections would follow the same pattern -->
                    <!-- For brevity, showing just the overview section -->
                </div>

                <div class="rules-actions">
                    <!-- Buttons can be loaded dynamically too -->
                    <div id="home-button"></div>
                    <div id="play-button"></div>
                </div>
            </div>
        </main>

        <!-- Footer will be injected here -->
        <div id="app-footer"></div>
    </div>

    <script>
        // Initialize page with components
        document.addEventListener('DOMContentLoaded', async function() {
            // Load common components
            await componentLoader.initializePage({
                title: 'Secret Hitler',
                subtitle: 'Pass & Play Edition'
            });

            // Load custom buttons
            await componentLoader.injectComponent('home-button', 'button', {
                btnClass: 'btn btn-primary btn-large',
                btnOnclick: "window.location.href='../index.html'",
                btnEmoji: 'üè†',
                btnText: 'Back to Home'
            });

            await componentLoader.injectComponent('play-button', 'button', {
                btnClass: 'btn btn-secondary btn-medium',
                btnOnclick: "window.location.href='play.html'",
                btnEmoji: 'üéÆ',
                btnText: 'Start New Game'
            });

            // Setup rules page navigation (same as before)
            const ruleNavButtons = document.querySelectorAll('.rule-nav-btn');
            const ruleSections = document.querySelectorAll('.rule-section');

            ruleNavButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const sectionName = this.dataset.section;
                    
                    // Update active navigation button
                    ruleNavButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show the selected section
                    ruleSections.forEach(section => section.classList.remove('active'));
                    const targetSection = document.getElementById(sectionName + '-section');
                    if (targetSection) {
                        targetSection.classList.add('active');
                    }
                });
            });
        });
    </script>
</body>
</html>